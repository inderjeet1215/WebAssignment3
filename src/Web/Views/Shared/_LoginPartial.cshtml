@using Microsoft.AspNetCore.Identity

    @if (Context.User.Identity.IsAuthenticated)
{
        <section class="col-lg-4 col-md-5 col-xs-12">
            <div class="esh-identity">
                <form asp-area="" asp-controller="Account" asp-action="SignOut" method="post" id="logoutForm" class="navbar-right">
                    <section class="esh-identity-section">

                        @*<div class="esh-identity-name">@User.FindFirst(x => x.Type == "preferred_username").Value</div>*@
                        <img style="visibility:hidden;" class="esh-identity-image" src="~/images/arrow-down.png">
                    </section>

                    <section class="esh-identity-drop" style="display:flex;">

                        <a class="esh-identity-item"
                           asp-controller="Order"
                           asp-action="Index" style="display:flex;">

                            <div class="esh-identity-name esh-identity-name--upper">My orders</div>
                            <p>|</p>
                        </a>

                        <a class="esh-identity-item"
                           asp-controller="Manage"
                           asp-action="Index" style="display:flex;">

                            <div class="esh-identity-name esh-identity-name--upper">My account</div>
                            <p>|</p>
                        </a>

                        <a class="esh-identity-item"
                           href="javascript:document.getElementById('logoutForm').submit()">

                            <div class="esh-identity-name esh-identity-name--upper">Log Out</div>
                        </a>
                    </section>
                </form>
            </div>
        </section>

        <section class="col-lg-1 col-xs-12">
            @await Component.InvokeAsync("Basket",  User.Identity.Name)
        </section>

}
else
{
        <section class="col-lg-1 col-lg-offset-3 col-md-3 col-xs-6">
            <div class="esh-identity">
                <section class="esh-identity-section">
                    <div class="esh-identity-item">

                        <a asp-area="" asp-controller="Account" asp-action="SignIn" class="esh-identity-name esh-identity-name--upper">
                            Login
                        </a>
                    </div>
                </section>
            </div>
        </section>

        <section class="col-lg-1 col-xs-12">
            @await Component.InvokeAsync("Basket")
        </section>
}
